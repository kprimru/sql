USE [FirstInstall]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [Install].[INSTALL_COMMENT_SEARCH]
	@USER	VARCHAR(50),
	@BEGIN	DATETIME,
	@END	DATETIME,
	@TXT	VARCHAR(100)
AS
BEGIN
	SET NOCOUNT ON;

	SELECT
		INS_DATE, CL_NAME, VD_NAME,
		a.SYS_SHORT, a.DT_NAME, a.NT_NAME, a.TT_NAME,
		IC_DATE, IC_USER, IC_TEXT
	FROM
		Install.InstallCommentsView a
	WHERE
		(IC_USER	LIKE	@USER	OR	@USER IS NULL) AND
		(IC_DATE	>=		@BEGIN	OR	@BEGIN IS NULL) AND
		(IC_DATE	<=		@END	OR	@END IS NULL) --AND
		--(CONTAINS(IC_TEXT, @TXT)	OR	@TXT IS NULL)

END
GRANT EXECUTE ON [Install].[INSTALL_COMMENT_SEARCH] TO rl_install_comment_r;
GO