USE [ClientDB]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [USR].[USR_DELETE]
	@ID INT
AS
BEGIN
	SET NOCOUNT ON;

	DELETE 
	FROM USR.USRUpdates
	WHERE UIU_ID_IB IN
		(
			SELECT UI_ID
			FROM USR.USRIB
			WHERE UI_ID_USR = @ID
		)
	
	DELETE 
	FROM USR.USRIB
	WHERE UI_ID_USR = @ID
	
	DELETE 
	FROM USR.USRPackage
	WHERE UP_ID_USR = @ID
	
	DELETE 
	FROM USR.USRFileData
	WHERE UF_ID = @ID
	
	DELETE 
	FROM USR.USRFileTech
	WHERE UF_ID = @ID
	
	DELETE 
	FROM USR.USRFile
	WHERE UF_ID = @ID
END